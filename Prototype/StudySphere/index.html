<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>StudySphere Frontend Test</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <h1>StudySphere Frontend</h1>
    <div class="container">
        <h2>Add Subject</h2>
        <input id="name" placeholder="Subject Name">
        <input id="teacher" placeholder="Teacher Name">
        <button onclick="createSubject()">Add Subject</button>
    </div>
    <div class="container">
        <h2>All Subjects</h2>
        <button onclick="loadSubjects()">Refresh List</button>
        <div id="subjects-list"></div>
    </div>
    <script>
        const API_URL = "http://127.0.0.1:5000";

        // test for subjects
        function loadSubjects() {
            fetch(`${API_URL}/subject`)
                .then(res => res.json())
                .then(data => {
                    const container = document.getElementById("subjects-list");
                    container.innerHTML = "";

                    data.forEach(sub => {
                        const div = document.createElement("div");
                        div.className = "subject-card";
                        div.innerHTML = `<strong>${sub.name}</strong><br>Teacher: ${sub.teacher}`;
                        container.appendChild(div);
                    });
                });
        }

        // post subject
        // still figuring out why it still accepts null value
        function createSubject() {
            const name = document.getElementById("name").value.trim();
            const teacher = document.getElementById("teacher").value.trim();

            fetch(`${API_URL}/subject`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ name, teacher })
            })
                .then(res => res.json())
                .then(data => {
                    alert("Subject added!");
                    loadSubjects();
                });
        }
        loadSubjects();
    </script>
</body>
</html>